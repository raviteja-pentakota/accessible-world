<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Welcome - Accessible World</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <base href="./">
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #f7f7f7;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            margin: 0;
        }

        .container {
            width: 100%; /* Changed max-width to 500px, now 100% up to 800px for better feedback display */
            max-width: 800px; 
            padding: 25px;
            background: #ffffff;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            text-align: center;
            margin-bottom: 20px; /* Space above footer */
        }

        button {
            width: 100%;
            padding: 12px;
            margin: 10px 0;
            background: #006699;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 24px;
            cursor: pointer;
        }

        button:hover {
            background: #287ba3;
        }

        label.sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0,0,0,0);
            white-space: nowrap;
            border-width: 0;
        }

        select, .answer-box {
            width: 100%;
            padding: 10px;
            margin-top: 15px;
            font-size: 1rem;
            border-radius: 6px;
            border: 1px solid #ccc;
            box-sizing: border-box;
        }

        .answer-box {
            min-height: 50px;
            text-align: left;
            background-color: #e9e9e9;
            padding: 15px;
        }
        .answer-box:focus {
            outline: 2px solid #3399cc;
            outline-offset: 2px;
        }

        /* Feedback Item Styles */
        .feedback-item {
            border-bottom: 1px solid #ddd;
            padding: 10px 0;
            margin-bottom: 10px;
        }
        .feedback-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }
        .feedback-item strong {
            color: #006699;
            font-size: 1.1em;
            display: block;
            margin-bottom: 5px;
        }
        .feedback-item .meta {
            font-size: 0.85em;
            color: #666;
            margin-top: 5px;
        }

        /* Footer Styles */
        .footer {
            background: #333;
            color: #fff;
            padding: 10px 20px;
            text-align: center;
            margin-top: auto;
            border-radius: 8px; /* Removed 0 0 from border-radius as container has no bottom radius */
            width: 100%;
            max-width: 800px; /* Match container width */
        }

        .footer a {
            color: #fff;
            text-decoration: none;
            margin: 0 10px;
        }

        .footer a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Welcome to Accessible World!</h1>
        <p>
            In today’s fast-moving world, success demands more than just hard work — it requires the right knowledge and preparation. At Accessible World, we equip you with everything you need: free training in accessibility testing, essential computer skills, and valuable materials like general knowledge, current affairs, and interview preparation resources.
            Plus, with our 3-level referral program, you have the opportunity to grow your network, learn new skills, and earn income at the same time — all within a fully inclusive and supportive environment.
            Don’t wait to unlock your full potential! Register now and log in to start your journey with Accessible World. Learn, explore, and achieve more with us!
        </p>
        <h2>Update: JavaScript Lessons in Web Development Courses!</h2>
        <p>Starting today, we are adding JavaScript topics under our Web Development courses in both Telugu and English. We are uploading the lessons along with videos gradually. As of now, you can explore a few JavaScript topics, and every day we will keep increasing the count. Once all the JavaScript topics are uploaded, we may revise the course price for new users.</p>
        <p>Along with this, we are excited to announce the launch of our Android application for easy access. Now you can access all our courses anytime, anywhere, right from your mobile device.</p>
        <p>You can download the Android application below this update and start learning on the go.</p>
        <p>Stay connected and keep learning with us — we’re committed to delivering the best in accessible education!</p>
        <a role="button" href="accessibleworld.apk" download>Click here to Download Accessible World Android Application</a>
        <button onclick="window.location.href='login.html'">Login</button>
        <button onclick="window.location.href='register.html'">Register</button>
        
        <h2>Question and answers</h2>
        <label for="questionSelect" class="sr-only">Select a question about Accessible World</label>
        <select id="questionSelect">
            <option value="">-- Select a question about Accessible World --</option>
            <option value="about">What is Accessible World?</option>
            <option value="freeCourses">Do you offer free accessibility training?</option>
            <option value="referral">How does the referral program work?</option>
            <option value="earning">Can I earn money through this platform?</option>
            <option value="courseList">What courses are available on the platform?</option>
            <option value="accessibilitySupport">Is the platform accessible for screen reader users?</option>
            <option value="oneTimeFee">Is ₹1000 a recurring fee or one-time payment?</option>
            <option value="whoCanJoin">Who can join Accessible World?</option>
            <option value="paymentMethod">How can I make the ₹1000 payment?</option>
            <option value="withdrawalProcess">How can I withdraw my referral earnings?</option>
        </select>
        <div id="answerBox" class="answer-box" tabindex="-1" aria-live="polite"></div>

        <h2 style="margin-top: 30px;">Recent User Feedback</h2>
        <div id="latestFeedbackContainer" class="answer-box" tabindex="-1">
            <p>Loading recent feedback...</p>
        </div>
        </div>
    
    <footer class="footer"> 
        <p>&copy; 2025 Accessible World Tutorials</p>
        <a href="privacy.html" target="_blank">Privacy Policy</a>
        <a href="terms.html" target="_blank">Terms of Service</a>
        <a href="contact.html" target="_blank">Contact Us</a>
    </footer>

    <script type="module">
        // Import Firebase modules
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-app.js";
        import { getFirestore, collection, query, orderBy, limit, getDocs } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore.js";

        // --- START: Firebase Configuration ---
        // REPLACE with your actual Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBWtr_ZwK8hfA1We-yq9uUOjw5C6wXhx0k",
            authDomain: "accessibleworld-7f599.firebaseapp.com",
            projectId: "accessibleworld-7f599",
            storageBucket: "accessibleworld-7f599.appspot.com",
            messagingSenderId: "264437218598",
            appId: "1:264437218598:web:cae58c1e578c7b08b815e7",
            measurementId: "G-1QRWXYRZ76"
        };


        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        // --- END: Firebase Configuration ---

        // --- START: FAQ LOGIC (Existing) ---
        const questionSelect = document.getElementById('questionSelect');
        const answerBox = document.getElementById('answerBox');

        const answers = {
            about: "Accessible World Tutorials is an inclusive learning platform dedicated to empowering individuals, especially the visually impaired. It offers practical training in accessibility testing, HTML, basic computer skills, interview materials, general knowledge, and current affairs. With a focus on accessibility and simplicity, the platform ensures that every learner has equal access to quality education and career-building resources.",
            freeCourses: "No, we do not offer free courses on this platform. To access our valuable training in Web Accessibility, HTML, Basic Computers, Interview Preparation, GK, and Current Affairs, you need to join by paying a one-time fee of ₹1000. This is a lifetime access fee, and there are no additional charges after that.",
            referral: "Our platform offers a 3-level referral program that allows you to earn rewards when you refer others. You will earn income not just from your direct referrals, but also from the people they refer, up to 3 levels deep. Here's how it works:\n\
• Level 1 (Direct Referral): You earn ₹150 for each person who joins through your referral link.\n\
• Level 2: You earn ₹100 when someone joins through your Level 1 referral's link.\n\
• Level 3: You earn ₹50 when someone joins through a Level 2 referral.\n\n\
This way, you can build a growing network and earn passive income while helping others access valuable training.",
            earning: "Yes, you can earn income by referring others to join the platform. As you share your referral link and help others enroll, you’ll receive referral earnings. At the same time, you’ll be learning valuable skills like web accessibility, HTML, and basic computer knowledge, helping you grow both financially and professionally while expanding your network.",
            courseList: "We offer training in Web Accessibility, HTML, Basic Computers, Interview Preparation, and General Knowledge. All courses are designed with accessibility and simplicity in mind.",
            accessibilitySupport: "Yes, Accessible World is fully accessible for screen reader users. We ensure that all our content is usable and inclusive for the visually impaired.",
            oneTimeFee: "The ₹1000 is a one-time lifetime payment. Once you join, you get lifetime access to all available and upcoming courses—no hidden or recurring charges.",
            whoCanJoin: "Anyone who is interested in learning accessibility skills, basic computer knowledge, interview preparation, or general awareness can join. This platform is designed for all learners, including but not limited to visually impaired individuals. Our goal is to provide inclusive and accessible education for everyone.",
            paymentMethod: "You can pay the ₹1000 through UPI, credit/debit cards, or other secure online payment methods integrated into our platform.",
            withdrawalProcess: "You can request a withdrawal once you earn referral income. Simply go to the dashboard, click on 'Show/Hide Referral Details', then select 'Request Withdrawal'. Enter your preferred withdrawal method and the amount, and submit the request. Your request will be sent for admin approval."
        };

        function updateAnswerAndFocus() {
            const selectedValue = questionSelect.value;
            const answerText = answers[selectedValue] || "";
            answerBox.textContent = answerText;

            if (answerText) {
                answerBox.focus();
            }
        }

        let wasArrowKeyUsed = false;

        questionSelect.addEventListener('keydown', function(event) {
            if (event.key === 'ArrowUp' || event.key === 'ArrowDown') {
                wasArrowKeyUsed = true;
            } else if (event.key === 'Enter') {
                event.preventDefault();
                wasArrowKeyUsed = false;
                updateAnswerAndFocus();
            } else {
                wasArrowKeyUsed = false;
            }
        });

        questionSelect.addEventListener('change', function() {
            if (wasArrowKeyUsed) {
                wasArrowKeyUsed = false;
                return;
            }
            updateAnswerAndFocus();
        });

        questionSelect.addEventListener('mousedown', function() {
            wasArrowKeyUsed = false;
        });

        questionSelect.addEventListener('blur', function() {
            updateAnswerAndFocus();
            wasArrowKeyUsed = false;
        });
        // --- END: FAQ LOGIC (Existing) ---


        // --- START: FEEDBACK DISPLAY LOGIC (New) ---
        const latestFeedbackContainer = document.getElementById('latestFeedbackContainer');

        const renderFeedbackList = (feedbackList) => {
            latestFeedbackContainer.innerHTML = ''; // Clear previous list

            if (!feedbackList || feedbackList.length === 0) {
                latestFeedbackContainer.innerHTML = '<p>No feedback submitted yet. Be the first to share your thoughts! 🚀</p>';
                return;
            }

            feedbackList.forEach(item => {
                const itemDiv = document.createElement('div');
                itemDiv.className = 'feedback-item';
                itemDiv.setAttribute('role', 'listitem');

                // Safely format the timestamp
                const date = item.timestamp?.toDate ? item.timestamp.toDate().toLocaleDateString('en-US', {
                    year: 'numeric', month: 'short', day: 'numeric'
                }) : 'N/A';
                
                // Escape HTML characters to prevent XSS (just in case)
                const safeText = item.text ? item.text.replace(/</g, "&lt;").replace(/>/g, "&gt;") : 'No text provided.';
                const safeName = item.name ? item.name.replace(/</g, "&lt;").replace(/>/g, "&gt;") : 'Anonymous';

                itemDiv.innerHTML = `
                    <strong>${safeText}</strong>
                    <div class="meta">
                        - ${safeName} (Topic: ${item.topic}) on ${date}
                    </div>
                `;
                latestFeedbackContainer.appendChild(itemDiv);
            });
        };

        const fetchAndDisplayFeedback = async () => {
            try {
                latestFeedbackContainer.innerHTML = '<p>Loading recent user feedback...</p>';
                
                // Query the 'feedback' collection: order by newest first, limit to top 3
                const q = query(collection(db, "feedback"), orderBy("timestamp", "desc"), limit(3));
                const snapshot = await getDocs(q);
                
                const feedbackList = snapshot.docs.map(doc => doc.data());
                renderFeedbackList(feedbackList);

            } catch (error) {
                console.error("Error fetching feedback:", error);
                latestFeedbackContainer.innerHTML = '<p style="color: red;">Could not load recent feedback at this time. 😞</p>';
            }
        };

        // Call the function to load feedback when the page loads
        fetchAndDisplayFeedback();
        // --- END: FEEDBACK DISPLAY LOGIC (New) ---

    </script>
</body>
</html>